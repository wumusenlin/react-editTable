"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{76555:function(je,ee,s){s.r(ee);var fe=s(42122),f=s.n(fe),he=s(27424),w=s.n(he),c=s(67294),i=s(26617),Ee=s(95716),p=s(85893);ee.default=function(){var me=(0,c.useState)(""),te=w()(me,2),re=te[0],le=te[1],ue=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"}],de=[{verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2"},{verison:"0.0.2",log:"add header Render"},{verison:"0.0.3",log:"feat style"},{verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],se=(0,c.useState)(de.map(function(U,P){return f()(f()({},U),{},{index:P})})),ne=w()(se,2),_e=ne[0],R=ne[1],K=function(){R(function(P){return P.concat([{}])})},oe=function(){R(function(P){return P.slice(0,-1)})},ye=function(){R([])},ge=function(P,F){console.log("options",F),R(P)};return(0,p.jsxs)("div",{className:"wumu-demo",children:[(0,p.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,p.jsx)("button",{onClick:K,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,p.jsx)("button",{onClick:oe,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,p.jsx)("button",{onClick:ye,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,p.jsx)(i.O,{editId:re,onEdit:le,columns:ue,dataSource:_e,onChange:ge})]})}},13595:function(je,ee,s){s.r(ee);var fe=s(42122),f=s.n(fe),he=s(27424),w=s.n(he),c=s(67294),i=s(26617),Ee=s(95716),p=s(85893);ee.default=function(){var me=(0,c.useState)(""),te=w()(me,2),re=te[0],le=te[1],ue=[{value:1,label:"v0.0.1"},{value:2,label:"v0.1.0"},{value:3,label:"v0.1.2"},{value:4,label:"v0.1.3"}],de=[{id:1,verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2"},{id:2,verison:"0.0.2",log:"add header Render"},{id:3,verison:"0.0.3",log:"feat style"},{id:4,verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{id:5,verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{id:6,verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],se=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u9009\u62E9\u7248\u672C\u53F7",dataIndex:"select",width:200,inputType:"select",inputOptions:{selectData:ue}},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"}],ne=[{}],_e=(0,c.useState)(ne.map(function(F,W){return f()(f()({},F),{},{index:W})})),R=w()(_e,2),K=R[0],oe=R[1],ye=function(){oe(function(W){return W.concat([{}])})},ge=function(){oe(function(W){return W.slice(0,-1)})},U=function(){oe([])},P=function(W,xe){var Ce;console.log("options",xe);var be=xe.value,Ie=xe.rowIndex,we=(Ce=de.find(function(Se){return Se.id===be}))!==null&&Ce!==void 0?Ce:{};W[Ie]=f()(f()({},W[Ie]),we),oe(W)};return(0,p.jsxs)("div",{className:"wumu-demo",children:[(0,p.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,p.jsx)("button",{onClick:ye,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,p.jsx)("button",{onClick:ge,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,p.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,p.jsx)(i.O,{editId:re,onEdit:le,columns:se,dataSource:K,onChange:P})]})}},26617:function(je,ee,s){s.d(ee,{O:function(){return Le}});var fe=s(42122),f=s.n(fe),he=s(27424),w=s.n(he),c=s(67294),i=s(85893),Ee={text:"text",select:"select"};function p(e){var t=e.columns,n=e.autoCol,o=e.scrollBar,u=n.autoWidthColIndex,a=n.autoColWidth,d=o?t.concat([{width:o}]):t;return(0,i.jsx)("colgroup",{children:d.map(function(r,l){var v=r.width,_="col-".concat(l);return u===l?(0,i.jsx)("col",{style:{width:a!=null?a:120}},_):(0,i.jsx)("col",{style:{width:v!=null?v:120}},_)})})}function me(e){var t=e.columns,n=e.clientWidth,o=n===void 0?0:n,u=null;t.forEach(function(d,r){var l=d.fixed;l!=="right"&&(u=r)});var a=o-t.reduce(function(d,r,l){var v;return d+(l===u?0:(v=r.width)!==null&&v!==void 0?v:120)},0);return{autoWidthColIndex:u,autoColWidth:a<120?120:a}}function te(e){return e.map(function(t,n){return f()(f()({},t),{},{_rowKey:n,rowIndex:n})})}function re(){return(0,i.jsx)("div",{className:"wumu-deafult-not-found-content",children:"\u6682\u65E0\u6570\u636E~"})}function le(e){var t=e.containerInfo,n=e.children,o=n===void 0?re():n,u={width:t.offsetWidth,marginLeft:t.scrollLeft};return(0,i.jsx)("div",{children:(0,i.jsx)("div",{style:u,children:o})})}function ue(e){var t=e.className,n=e.rowIndex,o=e.columnIndex,u=e.readonly,a=e.fixed,d=e.fixedClassName,r=d===void 0?"table-fixed-td":d,l=t;return n===0&&(l+=" table-first-tr"),o===0&&(l+=" table-first-td"),u&&(l+=" table-td-readonly"),a&&(l+=" ".concat(r)),l}function de(e){var t=e.style,n=e.fixed,o=e.align;return o&&(t.textAlign=o),n&&(t.position="sticky",t.left=0,t.zIndex=1),t}function se(e,t){var n=String(e).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var o=t||0,u="#",a,d;for(d=0;d<3;d++)a=parseInt(n.substr(d*2,2),16),a=Math.round(Math.min(Math.max(0,a+a*o),255)).toString(16),u+=("00"+a).substring(a.length);return u}function ne(e,t){var n,o=e==null||(n=e.color)===null||n===void 0?void 0:n.primaryColor;return t?se(o||"#1da57a",t):"".concat(o!=null?o:"var(--primary-color)")}function _e(e){var t=e.columns,n=e.headerHeight,o=t.map(function(a,d){var r=a.title,l=a.dataIndex,v=a.align,_=v===void 0?"left":v,x=a.fixed,C=a.readonly,h={textAlign:_},g="".concat(l,"-").concat(d);return(0,i.jsx)("th",{title:r,className:ue({className:"table-th",readonly:C,fixed:x,fixedClassName:"table-fixed-th"}),style:de({style:h,align:_,fixed:x}),children:r},g)}),u={height:n};return(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{style:u,className:"table-header",children:o})})}var R=_e;function K(e){return Array.isArray(e)?e:[]}function oe(e){return e!=null&&e!==""}function ye(e){return Array.isArray(e)&&e.length>0}var ge=function(t){var n=t.initValue,o=t.inputChange,u=o===void 0?function(){}:o,a=t.onEdit,d=a===void 0?function(){}:a,r=t.column,l=r.align,v=l===void 0?"left":l,_={textAlign:v};return(0,i.jsx)("input",{className:"wumu-input",style:_,defaultValue:n,onChange:function(C){u(C.target.value)},autoFocus:!0,onBlur:function(){return d("")}})},U=ge,P=s(73935),F=function(t){var n,o,u,a=(0,c.useContext)(Pe),d=a.topHeight,r=t.initValue,l=t.inputChange,v=l===void 0?function(){}:l,_=t.onEdit,x=_===void 0?function(){}:_,C=t.column,h=t.config,g=h===void 0?null:h,H=C.align,T=H===void 0?"left":H,I=C.inputOptions,V=C.dataIndex,q=I!=null?I:{},D=q.selectData,B=(n=(o=K(D).find(function(y){return y.value===r}))===null||o===void 0?void 0:o.label)!==null&&n!==void 0?n:r,E=(0,c.useRef)(null),k=(0,c.useState)(!0),z=w()(k,2),N=z[0],O=z[1],G=(0,c.useState)({}),$=w()(G,2),m=$[0],ae=$[1],A={textAlign:T},L={position:"absolute",zIndex:"10",width:((u=m==null?void 0:m.clientWidth)!==null&&u!==void 0?u:120)+16,left:(m==null?void 0:m.left)-16,top:(m==null?void 0:m.top)+(m==null?void 0:m.clientHeight)+1-d},X=f()({},L),j=(0,c.useMemo)(function(){if(D.length===0)return(0,i.jsx)("div",{children:"\u6682\u65E0\u6570\u636E"});var y=K(D).map(function(b,M){var S=b.value,ie=b.label,pe="".concat(M,"-").concat(S),ce=S===r,ve="".concat(ce?"wumu-dropDown-selected-item":""," wumu-dropdown-item"),Z=ce?{backgroundColor:"".concat(ne(g,.3))}:{};return(0,i.jsx)("div",{style:Z,className:ve,onClick:function(Q){Q.stopPropagation(),v(S),x(""),O(!1)},children:ie},pe)});return(0,i.jsx)(i.Fragment,{children:y})},[D==null?void 0:D.length]);(0,c.useEffect)(function(){if(E!=null&&E.current){for(var y,b=E.current,M=(y=E.current)!==null&&y!==void 0?y:{},S=M.clientWidth,ie=M.clientHeight,pe=M.offsetTop,ce=M.offsetLeft,ve=pe,Z=ce;(J=b)!==null&&J!==void 0&&J.offsetParent;){var J,Q;ve+=b.offsetTop,Z+=b.offsetLeft,b=(Q=b)===null||Q===void 0?void 0:Q.offsetParent}ae({clientWidth:S,clientHeight:ie,top:ve,left:Z})}},[E==null?void 0:E.current]);var Y=N?(0,P.createPortal)((0,i.jsx)("div",{className:"wumu-input-dropdown",style:X,children:j}),document.body):null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:E,className:"wumu-input",autoFocus:!0,name:V,style:A,onBlur:function(){return x("")},children:B}),Y]})},W=F,xe=function(t){var n=t.column,o=n.inputType;return o===Ee.select?(0,i.jsx)(W,f()({},t)):(0,i.jsx)(U,f()({},t))},Ce=xe;function be(e){var t=e.rowIndex,n=e.columns,o=e.record,u=e.rowHeight,a=e.editId,d=e.onEdit,r=d===void 0?function(){}:d,l=e.handleChange,v=l===void 0?function(){}:l,_=e.config,x=_===void 0?null:_,C=o._rowKey;return(0,i.jsx)("tr",{className:"table-tr",children:n.map(function(h,g){var H,T,I=h.dataIndex,V=h.align,q=V===void 0?"left":V,D=h.readonly,B=D===void 0?!1:D,E=h.fixed,k=h.inputType,z="".concat(g,"-").concat(I),N="".concat(C,"-").concat(I),O=N===a,G={height:u,boxShadow:O?"inset 0px 0px 0px 1px ".concat(ne(x)):"",padding:O?" 0 8px":"0 12px"},$=function(L){v(L,{rowIndex:C,dataIndex:I,record:o})},m=o[I],ae=O?(0,i.jsx)(Ce,{config:x,initValue:m,inputChange:$,onEdit:r,column:h}):k===Ee.select?(H=K(h==null||(T=h.inputOptions)===null||T===void 0?void 0:T.selectData).find(function(A){return A.value===m}))===null||H===void 0?void 0:H.label:m;return(0,i.jsx)("td",{id:N,style:de({style:G,align:q,fixed:E}),className:ue({className:"table-td",rowIndex:t,columnIndex:g,readonly:B,fixed:E}),title:m,onClick:function(){return typeof r=="function"&&!B?r(N):void 0},children:ae},z)})})}var Ie=be;function we(e){var t=e.dataSource,n=e.columns,o=e.rowHeight,u=o===void 0?40:o,a=e.onEdit,d=e.editId,r=e.handleChange,l=r===void 0?function(){}:r,v=e.notFoundContent,_=e.config,x=K(t).length===0;return x?v:(0,i.jsx)("tbody",{className:"table-tbody",children:K(t).map(function(C,h){return Ie({config:_,rowIndex:h,record:C,columns:n,rowHeight:u,onEdit:a,editId:d,handleChange:l})})})}var Se=we,He=function(t,n){var o,u=n.overscan,a=u===void 0?0:u,d=n.itemHeight,r=d===void 0?40:d,l=n.maxHeight,v=l===void 0?400:l,_=n.onScrolled,x=_===void 0?function(){}:_,C=n.wrapperPropsStyle,h=C===void 0?{}:C,g=(0,c.useRef)(null),H=(0,c.useState)(0),T=w()(H,2),I=T[0],V=T[1],q=(0,c.useState)(Math.ceil(v/r)),D=w()(q,1),B=D[0],E=(0,c.useState)({offsetWidth:0,clientWidth:0}),k=w()(E,2),z=k[0],N=k[1],O=I*r,G=(t==null?void 0:t.length)*r,$=function(X){var j=X.target,Y=j.scrollTop,y=Y===void 0?0:Y,b=j.scrollLeft,M=b===void 0?0:b;x({scrollLeft:M}),N(function(ie){return f()(f()({},ie),{},{scrollTop:y,scrollLeft:M})});var S=a>0?Math.floor(y/r)-Math.ceil(a/2):Math.floor(y/r);V(S>0?S:0)},m={style:f()(f()({},h),{},{width:"100%",height:G,transform:"translateZ(0)",paddingTop:O})},ae={onScroll:$,ref:function(X){return g.current=X},style:{overflowY:"overlay",overflowX:"auto",maxHeight:v,overflow:"auto"}};(0,c.useEffect)(function(){if(g!=null&&g.current){var L=new ResizeObserver(function(X){X.forEach(function(j){var Y=j.target,y=Y.offsetWidth,b=Y.clientWidth;N({offsetWidth:y,clientWidth:b})})});return L.observe(g==null?void 0:g.current),function(){L.disconnect()}}},[g==null?void 0:g.current]);var A=t.slice(I,I+B+a);return{list:A,wrapperProps:m,containerProps:ae,topHeight:O,bottomHeight:G-O-((o=A.length)!==null&&o!==void 0?o:0)*r,containerInfo:z}},Oe=He,Pe=(0,c.createContext)({});function $e(){return 16}var Ae=function(t){var n=t.columns,o=t.dataSource,u=t.editId,a=t.onEdit,d=a===void 0?function(){}:a,r=t.rowHeight,l=r===void 0?40:r,v=t.maxHeight,_=v===void 0?400:v,x=t.headerHeight,C=x===void 0?55:x,h=t.onChange,g=h===void 0?function(){}:h,H=t.hiddenHerder,T=H===void 0?!1:H,I=t.notFoundContent,V=I===void 0?null:I,q=t.config,D=q===void 0?null:q,B=(0,c.useRef)(null),E=(0,c.useState)([]),k=w()(E,2),z=k[0],N=k[1],O=(0,c.useState)([]),G=w()(O,2),$=G[0],m=G[1],ae=(0,c.useState)({autoWidthColIndex:null,autoColWidth:120}),A=w()(ae,2),L=A[0],X=A[1],j=Oe(z,{itemHeight:l,maxHeight:_,overscan:0,onScrolled:function(Z){var J=Z.scrollLeft;B.current&&(B.current.scrollLeft=J)},wrapperPropsStyle:{borderSpacing:0}}),Y=j.list,y=j.wrapperProps,b=j.containerProps,M=j.bottomHeight,S=j.containerInfo,ie=j.topHeight,pe=function(Z,J){var Q=J.rowIndex,We=J.dataIndex,De=z;De[Q][We]=Z,g(De,{rowIndex:Q,dataIndex:We,value:Z,record:De[Q]})};(0,c.useEffect)(function(){N(te(o))},[o.length]),(0,c.useEffect)(function(){m(n)},[n]),(0,c.useEffect)(function(){S.clientWidth&&X(me({columns:$,clientWidth:S.clientWidth}))},[S]);var ce=T?null:(0,i.jsx)("div",{className:"wumu-table-header",ref:B,children:(0,i.jsxs)("table",{children:[p({columns:$,autoCol:L,scrollBar:$e()}),R({columns:$,headerHeight:C})]})});return(0,i.jsxs)("div",{className:"wumu-table",children:[ce,(0,i.jsx)("div",f()(f()({className:"wumu-table-body"},b),{},{children:(0,i.jsx)(Pe.Provider,{value:{topHeight:ie},children:(0,i.jsxs)("table",f()(f()({},y),{},{children:[p({columns:n,autoCol:L}),Se({config:D,dataSource:Y,columns:$,rowHeight:l,onEdit:d,editId:u,handleChange:pe,notFoundContent:le(V?{containerInfo:S,children:V}:{containerInfo:S,children:re()})}),(0,i.jsx)("div",{style:{height:M}})]}))})}))]})},Le=Ae},95716:function(){}}]);
