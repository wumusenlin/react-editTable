"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{99895:function(xt,Y,j){j.r(Y),j.d(Y,{default:function(){return vt}});var U=j(27424),x=j.n(U),c=j(67294),q=j(42122),v=j.n(q),u=j(85893);function tt(e){var t=e.columns,a=e.headerHeight,o=t.map(function(d,r){var n=d.title,l=d.dataIndex,i=d.align,g=i===void 0?"left":i,f={textAlign:g,borderRight:"1px solid #ccc"},C="".concat(l,"-").concat(r);return(0,u.jsxs)("th",{className:"table-th",style:f,children:[r,n]},C)}),s={height:a};return(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{style:s,className:"table-header",children:o})})}var et=tt;function Z(e){return Array.isArray(e)?e:[]}function mt(e){return e!=null&&e!==""}var at=function(t){var a=t.initValue,o=t.inputChange,s=o===void 0?function(){}:o,d=t.onEdit,r=d===void 0?function(){}:d;return(0,u.jsx)("input",{className:"wumu-input",defaultValue:a,onChange:function(l){s(l.target.value)},autoFocus:!0,onBlur:function(){return r("")}})},nt=at;function ot(e){var t=e.columns,a=e.record,o=e.rowHeight,s=e.editId,d=e.onEdit,r=d===void 0?function(){}:d,n=e.handleChange,l=n===void 0?function(){}:n,i=a.rowKey;return(0,u.jsx)("tr",{className:"table-tr",children:t.map(function(g,f){var C=g.dataIndex,I="".concat(f,"-").concat(C),S="".concat(i,"-").concat(C),h=S===s,B={height:o,boxShadow:h?"inset 0px 0px 0px 1px var(--highlight-color)":"",padding:h?" 0 8px":"0 12px"},y=function(H){l(H,{rowIndex:i,dataIndex:C,record:a,cellId:S})},m=a[C],A=h?(0,u.jsx)(nt,{initValue:m,inputChange:y,onEdit:r}):m;return(0,u.jsx)("td",{id:S,style:B,className:"table-td",onClick:function(){return typeof r=="function"?r(S):void 0},children:A},I)})})}var dt=ot;function rt(e){var t=e.dataSource,a=e.columns,o=e.rowHeight,s=o===void 0?40:o,d=e.onEdit,r=e.editId,n=e.handleChange,l=n===void 0?function(){}:n,i=function(){};return Z(t).length===0?(0,u.jsxs)("div",{children:["\u6682\u65E0\u6570\u636E",(0,u.jsx)("button",{type:"button",onClick:function(){return i()},children:"\u65B0\u589E\u884C"})]}):(0,u.jsx)("tbody",{className:"table-tbody",children:Z(t).map(function(g){return dt({record:g,columns:a,rowHeight:s,onEdit:d,editId:r,handleChange:l})})})}var it=rt,lt=function(t,a){var o,s=a.overscan,d=s===void 0?0:s,r=a.itemHeight,n=r===void 0?40:r,l=a.maxHeight,i=a.height,g=i===void 0?510:i,f=a.onScrolled,C=f===void 0?function(){}:f,I=a.wrapperPropsStyle,S=I===void 0?{}:I,h=(0,c.useRef)(),B=(0,c.useState)(0),y=x()(B,2),m=y[0],A=y[1],_=(0,c.useState)((t==null?void 0:t.length)*n),H=x()(_,2),w=H[0],L=H[1],K=(0,c.useState)(Math.ceil(g/n)),D=x()(K,1),R=D[0],M=(0,c.useState)({}),p=x()(M,2),F=p[0],P=p[1],$=m*n,G=function(E){var N=E.target,V=N.scrollTop,b=V===void 0?0:V,J=N.scrollLeft,O=J===void 0?0:J;C({scrollLeft:O}),P(function(Ct){return v()(v()({},Ct),{},{scrollTop:b,scrollLeft:O})});var Q=d>0?Math.floor(b/n)-Math.ceil(d/2):Math.floor(b/n);A(Q>0?Q:0)},k={style:v()(v()({},S),{},{width:"100%",height:w,transform:"translateZ(0)",paddingTop:$})},X={onScroll:G,ref:function(E){return h.current=E},style:{overflowY:"overlay",overflowX:"auto",maxHeight:l,backgroundColor:"#fff",overflow:"auto"}};(0,c.useEffect)(function(){L((t==null?void 0:t.length)*n)},[t==null?void 0:t.length]),(0,c.useEffect)(function(){h!=null&&h.current&&P({offsetWidth:h.current.offsetWidth,clientWidth:h.current.clientWidth})},[h==null?void 0:h.current]);var T=t.slice(m,m+R+d);return{list:T,wrapperProps:k,containerProps:X,topHeight:$,bottomHeight:w-$-((o=T.length)!==null&&o!==void 0?o:0)*n,containerInfo:F}},ut=lt;function z(e){var t=e.columns,a=e.autoCol,o=e.scrollBar,s=a.autoWidthColIndex,d=a.autoColWidth,r=o?t.concat([{width:o}]):t;return(0,u.jsx)("colgroup",{children:r.map(function(n,l){var i=n.width,g="col-".concat(l);return s===l?(0,u.jsx)("col",{style:{width:d!=null?d:120}},g):(0,u.jsx)("col",{style:{width:i!=null?i:120}},g)})})}function st(e){var t=e.columns,a=e.clientWidth,o=a===void 0?0:a,s=null;t.forEach(function(r,n){var l=r.fixed;l!=="right"&&(s=n)});var d=o-1-t.reduce(function(r,n,l){var i;return r+(l===s?0:(i=n.width)!==null&&i!==void 0?i:120)},0);return{autoWidthColIndex:s,autoColWidth:d}}function ht(e){return e.map(function(t,a){return v()(v()({},t),{},{rowKey:a})})}function ct(){return 16}var gt=function(t){var a=t.columns,o=t.dataSource,s=t.editId,d=t.onEdit,r=d===void 0?function(){}:d,n=t.rowHeight,l=n===void 0?40:n,i=t.maxHeight,g=i===void 0?400:i,f=t.headerHeight,C=f===void 0?55:f,I=t.onChange,S=I===void 0?function(){}:I,h=(0,c.useRef)(),B=(0,c.useState)([]),y=x()(B,2),m=y[0],A=y[1],_=(0,c.useState)([]),H=x()(_,2),w=H[0],L=H[1],K=(0,c.useState)({autoWidthColIndex:null,autoColWidth:120}),D=x()(K,2),R=D[0],M=D[1],p=ut(m,{itemHeight:l,maxHeight:g,overscan:2,onScrolled:function(W){var E=W.scrollLeft;h.current&&(h.current.scrollLeft=E),r("")},wrapperPropsStyle:{borderSpacing:0,boxShadow:"inset 0px 0px 10px 0px #dadada"}}),F=p.list,P=p.wrapperProps,$=p.containerProps,G=p.bottomHeight,k=p.containerInfo,X=function(W,E){var N=E.rowIndex,V=E.dataIndex,b=m;b[N][V]=W,S(b)};return(0,c.useEffect)(function(){(o==null?void 0:o.length)>0&&A(ht(o))},[o.length]),(0,c.useEffect)(function(){L(a)},[a]),(0,c.useLayoutEffect)(function(){k.clientWidth&&M(st({columns:w,clientWidth:k.clientWidth}))},[k]),(0,u.jsxs)("div",{className:"wumu-table",children:[(0,u.jsx)("div",{className:"wumu-table-header",ref:h,children:(0,u.jsxs)("table",{children:[z({columns:w,autoCol:R,scrollBar:ct()}),et({columns:w,headerHeight:C})]})}),(0,u.jsx)("div",v()(v()({className:"wumu-table-body"},$),{},{children:(0,u.jsxs)("table",v()(v()({},P),{},{children:[z({columns:w,autoCol:R}),it({dataSource:F,columns:w,rowHeight:l,onEdit:r,editId:s,handleChange:X}),(0,u.jsx)("div",{style:{height:G}})]}))}))]})},ft=gt,vt=function(){var e=(0,c.useState)(""),t=x()(e,2),a=t[0],o=t[1],s=[{title:"A",dataIndex:"A",width:300},{title:"B",dataIndex:"B"},{title:"C",dataIndex:"C",width:300},{title:"D",dataIndex:"D"},{title:"E",dataIndex:"E",width:380},{title:"F",dataIndex:"F",width:300}],d=[{A:"\u5E72\u561B",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fasdfasdf",B:"asdfasd",C:"ghjfgh"},{A:"adsfasdf",B:"fasdf",C:"rsfgsdf"},{A:"khjkghj",B:"\u54CE\u54DF",C:"8iuk",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"wts",B:"vbn",C:"fhj"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"\u5E72\u561B",B:"shshsdfgsdfgsdfgsdfgsdfgsdfg",C:"khjkghjk"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"}],r=(0,c.useState)(d),n=x()(r,2),l=n[0],i=n[1];return(0,u.jsx)(ft,{editId:a,onEdit:o,columns:s,dataSource:l,maxHeight:320,onChange:function(f){return i(f)}})}}}]);
