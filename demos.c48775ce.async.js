"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{76555:function(We,te,c){c.r(te);var me=c(42122),f=c.n(me),_e=c(27424),ne=c.n(_e),oe=c(67294),W=c(16200),h=c(95716),a=c(85893);te.default=function(){var le=(0,oe.useState)(""),X=ne()(le,2),ge=X[0],xe=X[1],ue=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300,inputOptions:{placeholder:"\u8BF7\u8F93\u5165\u66F4\u65B0\u65E5\u5FD7"}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u7528\u6237-\u59D3\u540D",dataIndex:["user","name"],width:300},{title:"\u7528\u6237-\u5E74\u7EAA",dataIndex:["user","age"]}],de=[{verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2",user:{name:"xiaohua",age:18}},{verison:"0.0.2",log:"add header Render"},{verison:"0.0.3",log:"feat style"},{verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],ce=(0,oe.useState)(de.map(function(Z,A){return f()(f()({},Z),{},{index:A})})),ae=ne()(ce,2),se=ae[0],T=ae[1],Ce=function(){T(function(A){return A.concat([{}])})},Y=function(){T(function(A){return A.slice(0,-1)})},U=function(){T([])},pe=function(A,V){console.log("options",V),T(A)};return(0,a.jsxs)("div",{className:"wumu-demo",children:[(0,a.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,a.jsx)("button",{onClick:Ce,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,a.jsx)("button",{onClick:Y,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,a.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,a.jsx)(W.O,{editId:ge,onEdit:xe,columns:ue,dataSource:se,onChange:pe})]})}},13595:function(We,te,c){c.r(te);var me=c(42122),f=c.n(me),_e=c(27424),ne=c.n(_e),oe=c(67294),W=c(16200),h=c(95716),a=c(85893);te.default=function(){var le=(0,oe.useState)(""),X=ne()(le,2),ge=X[0],xe=X[1],ue=[{value:1,label:"v0.0.1"},{value:2,label:"v0.1.0"},{value:3,label:"v0.1.2"},{value:4,label:"v0.1.3"}],de=[{id:1,verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2"},{id:2,verison:"0.0.2",log:"add header Render"},{id:3,verison:"0.0.3",log:"feat style"},{id:4,verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{id:5,verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{id:6,verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],ce=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u9009\u62E9\u7248\u672C\u53F7",dataIndex:"select",width:200,inputType:"select",inputOptions:{selectData:ue}},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"}],ae=[{}],se=(0,oe.useState)(ae.map(function(V,L){return f()(f()({},V),{},{index:L})})),T=ne()(se,2),Ce=T[0],Y=T[1],U=function(){Y(function(L){return L.concat([{}])})},pe=function(){Y(function(L){return L.slice(0,-1)})},Z=function(){Y([])},A=function(L,Ie){var Ee;console.log("options",Ie);var je=Ie.value,be=Ie.rowIndex,Pe=(Ee=de.find(function(Oe){return Oe.id===je}))!==null&&Ee!==void 0?Ee:{};L[be]=f()(f()({},L[be]),Pe),Y(L)};return(0,a.jsxs)("div",{className:"wumu-demo",children:[(0,a.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,a.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,a.jsx)("button",{onClick:pe,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,a.jsx)("button",{onClick:Z,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,a.jsx)(W.O,{editId:ge,onEdit:xe,columns:ce,dataSource:Ce,onChange:A})]})}},16200:function(We,te,c){c.d(te,{O:function(){return Ve}});var me=c(42122),f=c.n(me),_e=c(38416),ne=c.n(_e),oe=c(27424),W=c.n(oe),h=c(67294),a=c(85893),le={text:"text",select:"select"};function X(e){var t=e.columns,n=e.autoCol,o=e.scrollBar,u=n.autoWidthColIndex,i=n.autoColWidth,l=o?t.concat([{width:o,dataIndex:"_innerScrollBar",title:""}]):t;return(0,a.jsx)("colgroup",{children:l.map(function(v,r){var d=v.width,_="col-".concat(r);return u===r?(0,a.jsx)("col",{style:{width:i!=null?i:120}},_):(0,a.jsx)("col",{style:{width:d!=null?d:120}},_)})})}function ge(e){var t=e.columns,n=e.clientWidth,o=n===void 0?0:n,u=null;t.forEach(function(l,v){var r=l.fixed;r!=="right"&&(u=v)});var i=o-t.reduce(function(l,v,r){var d;return l+(r===u?0:(d=v.width)!==null&&d!==void 0?d:120)},0);return{autoWidthColIndex:u,autoColWidth:i<120?120:i}}function xe(e){return e.map(function(t,n){return f()(f()({},t),{},{_rowKey:n,rowIndex:n})})}function ue(){return(0,a.jsx)("div",{className:"wumu-default-not-found-content",children:"\u6682\u65E0\u6570\u636E~"})}function de(e){var t=e.containerInfo,n=e.children,o=n===void 0?ue():n,u={width:t.offsetWidth,marginLeft:t.scrollLeft};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{style:u,children:o})})}function ce(e){var t=e.className,n=e.rowIndex,o=e.columnIndex,u=e.readonly,i=e.fixed,l=e.fixedClassName,v=l===void 0?"table-fixed-td":l,r=e.extraClassName,d=t;return n===0&&(d+=" table-first-tr"),o===0&&(d+=" table-first-td"),u&&(d+=" table-td-readonly"),i&&(d+=" ".concat(v)),r&&(d+=" ".concat(r)),d}function ae(e){var t=e.style,n=e.fixed,o=e.align;return o&&(t.textAlign=o),n&&(t.position="sticky",t.left=0,t.zIndex=1),t}function se(e,t){var n=String(e).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var o=t||0,u="#",i,l;for(l=0;l<3;l++)i=parseInt(n.substr(l*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*o),255)).toString(16),u+=("00"+i).substring(i.length);return u}function T(e,t){var n,o=e==null||(n=e.color)===null||n===void 0?void 0:n.primaryColor;return t?se(o||"#1da57a",t):"".concat(o!=null?o:"var(--primary-color)")}function Ce(e){var t=e.columns,n=e.headerHeight,o=e.containerInfo,u=t.map(function(l,v){var r=l.title,d=l.dataIndex,_=l.align,x=_===void 0?"left":_,C=l.fixed,I=l.readonly,D={textAlign:x},s="".concat(d,"-").concat(v),$=(o==null?void 0:o.scrollLeft)>0&&C==="left"?"fixed-left-shadow":null,H=C?(0,a.jsx)("div",{className:"table-cell-overflow-hidden",children:r}):r;return(0,a.jsx)("th",{title:r,className:ce({className:"table-th",readonly:I,fixed:C,fixedClassName:"table-fixed-th",extraClassName:$}),style:ae({style:D,align:x,fixed:C}),children:H},s)}),i={height:n};return(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{style:i,className:"table-header",children:u})})}var Y=Ce;function U(e){return Array.isArray(e)?e:[]}function pe(e){return e!=null&&e!==""}function Z(e){return Array.isArray(e)&&e.length>0}var A=function(t){var n=t.initValue,o=t.inputChange,u=o===void 0?function(){}:o,i=t.onEdit,l=i===void 0?function(){}:i,v=t.column,r=v.align,d=r===void 0?"left":r,_=v.inputOptions,x=_===void 0?{}:_,C={textAlign:d};return(0,a.jsx)("input",f()({className:"wumu-input",style:C,defaultValue:n,onChange:function(D){u(D.target.value)},autoFocus:!0,onBlur:function(){return l("")}},x))},V=A,L=c(73935),Ie=function(t){var n,o,u,i=(0,h.useRef)({current:{inited:!1}}),l=(0,h.useContext)(He),v=l.topHeight,r=t.initValue,d=t.inputChange,_=d===void 0?function(){}:d,x=t.onEdit,C=x===void 0?function(){}:x,I=t.column,D=t.config,s=D===void 0?null:D,$=I.align,H=$===void 0?"left":$,E=I.inputOptions,F=I.dataIndex,ie=E!=null?E:{},y=ie.selectData,J=(n=(o=U(y).find(function(b){return b.value===r}))===null||o===void 0?void 0:o.label)!==null&&n!==void 0?n:r,g=(0,h.useRef)(null),k=(0,h.useState)(!0),Q=W()(k,2),R=Q[0],P=Q[1],N=(0,h.useState)({}),q=W()(N,2),m=q[0],ee=q[1],z={textAlign:H},O={position:"absolute",zIndex:"10",width:((u=m==null?void 0:m.clientWidth)!==null&&u!==void 0?u:120)+16,left:(m==null?void 0:m.left)-16,top:(m==null?void 0:m.top)+(m==null?void 0:m.clientHeight)+3-v},p=(0,h.useMemo)(function(){if((y==null?void 0:y.length)===0)return(0,a.jsx)("div",{className:"wumu-dropdown-notfount",children:"\u6682\u65E0\u6570\u636E ~"});var b=U(y).map(function(j,M){var S=j.value,re=j.label,ye="".concat(M,"-").concat(S),ve=S===r,fe="".concat(ve?"wumu-dropDown-selected-item":""," wumu-dropdown-item"),he=ve?{backgroundColor:"".concat(T(s,.3))}:{};return(0,a.jsx)("div",{style:he,className:fe,onClick:function(K){K.stopPropagation(),_(S),C(""),P(!1)},children:re},ye)});return(0,a.jsx)(a.Fragment,{children:b})},[y==null?void 0:y.length]),w=function(){i.current.inited?(P(!1),C("")):i.current.inited=!0};(0,h.useEffect)(function(){if(g!=null&&g.current){for(var b,j=g.current,M=(b=g.current)!==null&&b!==void 0?b:{},S=M.clientWidth,re=M.clientHeight,ye=M.offsetTop,ve=M.offsetLeft,fe=ye,he=ve;(B=j)!==null&&B!==void 0&&B.offsetParent;){var B,K;fe+=j.offsetTop,he+=j.offsetLeft,j=(K=j)===null||K===void 0?void 0:K.offsetParent}ee({clientWidth:S,clientHeight:re,top:fe,left:he})}},[g==null?void 0:g.current]),(0,h.useEffect)(function(){return document.addEventListener("click",w),function(){return document.removeEventListener("click",w)}},[]);var G=R?(0,L.createPortal)((0,a.jsx)("div",{className:"wumu-input-dropdown",style:O,children:p}),document.body):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:g,className:"wumu-input",autoFocus:!0,name:F,style:z,onBlur:function(){return C("")},children:J}),G]})},Ee=Ie,je=function(t){var n=t.column,o=n.inputType;return o===le.select?(0,a.jsx)(Ee,f()({},t)):(0,a.jsx)(V,f()({},t))},be=je;function Pe(e){var t,n,o,u=e.rowIndex,i=e.record,l=e.rowHeight,v=e.editId,r=e.containerInfo,d=e.onEdit,_=d===void 0?function(){}:d,x=e.handleChange,C=x===void 0?function(){}:x,I=e.config,D=I===void 0?null:I,s=e.col,$=e.columnIndex,H=i._rowKey,E=s.dataIndex,F=s.align,ie=F===void 0?"left":F,y=s.readonly,J=y===void 0?!1:y,g=s.fixed,k=s.inputType,Q="".concat($,"-").concat(E),R="".concat(H,"-").concat(E),P=R===v,N={height:l,boxShadow:P?"inset 0px 0px 0px 1px ".concat(T(D)):"",padding:P?" 0 8px":"0 12px"},q=function(p){C(p,{rowIndex:H,dataIndex:E,record:i})},m=function(){if(Array.isArray(E)){var p=i;return E.forEach(function(w){p instanceof Object?p=p[w]:p=null}),p}return i[E]},ee=P?(0,a.jsx)(be,{config:D,initValue:m(),inputChange:q,onEdit:_,column:s}):k===le.select?(t=U(s==null||(n=s.inputOptions)===null||n===void 0?void 0:n.selectData).find(function(O){return O.value===m()}))===null||t===void 0?void 0:t.label:g?(0,a.jsx)("div",{className:"table-cell-overflow-hidden",children:m()}):m(),z=((o=r==null?void 0:r.scrollLeft)!==null&&o!==void 0?o:0)>0&&g==="left"?"fixed-left-shadow":null;return(0,a.jsx)("td",{id:R,style:ae({style:N,align:ie,fixed:g}),className:ce({className:"table-td",rowIndex:u,columnIndex:$,readonly:J,fixed:g,extraClassName:z}),title:m(),onClick:function(){return typeof _=="function"&&!J?_(R):void 0},children:ee},Q)}var Oe=Pe;function $e(e){var t=e.columns;return(0,a.jsx)("tr",{className:"table-tr",children:t.map(function(n,o){return Oe(f()(f()({},e),{},{col:n,columnIndex:o}))})})}var Ne=$e;function Me(e){var t=e.dataSource,n=e.columns,o=e.rowHeight,u=o===void 0?40:o,i=e.onEdit,l=e.editId,v=e.handleChange,r=v===void 0?function(){}:v,d=e.notFoundContent,_=e.containerInfo,x=e.config,C=U(t).length===0;return C?d:(0,a.jsx)("tbody",{className:"table-tbody",children:U(t).map(function(I,D){return Ne({config:x,rowIndex:D,record:I,columns:n,rowHeight:u,onEdit:i,editId:l,handleChange:r,containerInfo:_})})})}var Te=Me,Re=function(t,n){var o,u=n!=null?n:{},i=u.overscan,l=i===void 0?0:i,v=u.itemHeight,r=v===void 0?40:v,d=u.maxHeight,_=d===void 0?400:d,x=u.onScrolled,C=x===void 0?function(){}:x,I=u.wrapperPropsStyle,D=I===void 0?{}:I,s=(0,h.useRef)(null),$=(0,h.useState)(0),H=W()($,2),E=H[0],F=H[1],ie=(0,h.useState)(Math.ceil(_/r)),y=W()(ie,1),J=y[0],g=(0,h.useState)({offsetWidth:0,clientWidth:0}),k=W()(g,2),Q=k[0],R=k[1],P=E*r,N=(t==null?void 0:t.length)*r,q=function(p){var w=p.target,G=w.scrollTop,b=G===void 0?0:G,j=w.scrollLeft,M=j===void 0?0:j;C({scrollLeft:M}),R(function(re){return f()(f()({},re),{},{scrollTop:b,scrollLeft:M})});var S=l>0?Math.floor(b/r)-Math.ceil(l/2):Math.floor(b/r);F(S>0?S:0)},m={style:f()(f()({},D),{},{width:"100%",height:N,transform:"translateZ(0)",paddingTop:P})},ee={onScroll:q,ref:function(p){return s.current=p},style:{overflowY:"overlay",overflowX:"auto",maxHeight:_,overflow:"auto"}};(0,h.useEffect)(function(){if(s!=null&&s.current){var O=new ResizeObserver(function(p){p.forEach(function(w){var G=w.target,b=G.offsetWidth,j=G.clientWidth;R({offsetWidth:b,clientWidth:j})})});return O.observe(s==null?void 0:s.current),function(){O.disconnect()}}},[s==null?void 0:s.current]);var z=t.slice(E,E+J+l);return{list:z,wrapperProps:m,containerProps:ee,topHeight:P,bottomHeight:N-P-((o=z.length)!==null&&o!==void 0?o:0)*r,containerInfo:Q}},Be=Re,He=(0,h.createContext)({});function Ke(){return 16}var Ue=function(t){var n=t.columns,o=t.dataSource,u=t.editId,i=t.onEdit,l=i===void 0?function(){}:i,v=t.rowHeight,r=v===void 0?40:v,d=t.maxHeight,_=d===void 0?400:d,x=t.headerHeight,C=x===void 0?55:x,I=t.onChange,D=I===void 0?function(){}:I,s=t.hiddenHerder,$=s===void 0?!1:s,H=t.notFoundContent,E=H===void 0?null:H,F=t.config,ie=F===void 0?null:F,y=(0,h.useRef)(null),J=(0,h.useState)([]),g=W()(J,2),k=g[0],Q=g[1],R=(0,h.useState)([]),P=W()(R,2),N=P[0],q=P[1],m=(0,h.useState)({autoWidthColIndex:null,autoColWidth:120}),ee=W()(m,2),z=ee[0],O=ee[1],p={itemHeight:r,maxHeight:_,overscan:0,onScrolled:function(B){var K=B.scrollLeft;y.current&&(y.current.scrollLeft=K)},wrapperPropsStyle:{borderSpacing:0}},w=Be(k,p),G=w.list,b=w.wrapperProps,j=w.containerProps,M=w.bottomHeight,S=w.containerInfo,re=w.topHeight,ye=function(B,K){var we=K.rowIndex,Se=K.dataIndex,De=k;Array.isArray(Se)?Se.reduceRight(function(Ae,Le,Fe){return Fe===0&&(De[we][Le]=Ae),ne()({},Le,Ae)},B):De[we][Se]=B,D(De,{rowIndex:we,dataIndex:Se,value:B,record:De[we]})};(0,h.useEffect)(function(){Q(xe(o))},[o.length]),(0,h.useEffect)(function(){q(n)},[n]),(0,h.useEffect)(function(){S.clientWidth&&O(ge({columns:N,clientWidth:S.clientWidth}))},[S]);var ve=$?null:(0,a.jsx)("div",{className:"wumu-table-header",ref:y,children:(0,a.jsxs)("table",{children:[X({columns:N,autoCol:z,scrollBar:Ke()}),Y({columns:N,headerHeight:C,containerInfo:S})]})}),fe={topHeight:re};return(0,a.jsxs)("div",{className:"wumu-table",children:[ve,(0,a.jsx)("div",f()(f()({className:"wumu-table-body"},j),{},{children:(0,a.jsx)(He.Provider,{value:fe,children:(0,a.jsxs)("table",f()(f()({},b),{},{children:[X({columns:n,autoCol:z}),Te({config:ie,dataSource:G,columns:N,rowHeight:r,onEdit:l,editId:u,handleChange:ye,containerInfo:S,notFoundContent:de(E?{containerInfo:S,children:E}:{containerInfo:S,children:ue()})}),(0,a.jsx)("div",{style:{height:M}})]}))})}))]})},Ve=Ue},95716:function(){}}]);
