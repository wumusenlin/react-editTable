"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{76555:function(We,ne,u){u.r(ne);var he=u(42122),_=u.n(he),me=u(27424),ae=u.n(me),oe=u(67294),W=u(26617),f=u(95716),a=u(85893);ne.default=function(){var le=(0,oe.useState)(""),Z=ae()(le,2),ge=Z[0],_e=Z[1],de=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u7528\u6237-\u59D3\u540D",dataIndex:["user","name"],width:300},{title:"\u7528\u6237-\u5E74\u7EAA",dataIndex:["user","age"]}],ue=[{verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2",user:{name:"xiaohua",age:18}},{verison:"0.0.2",log:"add header Render"},{verison:"0.0.3",log:"feat style"},{verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],se=(0,oe.useState)(ue.map(function(Q,L){return _()(_()({},Q),{},{index:L})})),ie=ae()(se,2),ce=ie[0],T=ie[1],xe=function(){T(function(L){return L.concat([{}])})},J=function(){T(function(L){return L.slice(0,-1)})},U=function(){T([])},pe=function(L,V){console.log("options",V),T(L)};return(0,a.jsxs)("div",{className:"wumu-demo",children:[(0,a.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,a.jsx)("button",{onClick:xe,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,a.jsx)("button",{onClick:J,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,a.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,a.jsx)(W.O,{editId:ge,onEdit:_e,columns:de,dataSource:ce,onChange:pe})]})}},13595:function(We,ne,u){u.r(ne);var he=u(42122),_=u.n(he),me=u(27424),ae=u.n(me),oe=u(67294),W=u(26617),f=u(95716),a=u(85893);ne.default=function(){var le=(0,oe.useState)(""),Z=ae()(le,2),ge=Z[0],_e=Z[1],de=[{value:1,label:"v0.0.1"},{value:2,label:"v0.1.0"},{value:3,label:"v0.1.2"},{value:4,label:"v0.1.3"}],ue=[{id:1,verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2"},{id:2,verison:"0.0.2",log:"add header Render"},{id:3,verison:"0.0.3",log:"feat style"},{id:4,verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{id:5,verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{id:6,verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],se=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u9009\u62E9\u7248\u672C\u53F7",dataIndex:"select",width:200,inputType:"select",inputOptions:{selectData:de}},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"}],ie=[{}],ce=(0,oe.useState)(ie.map(function(V,O){return _()(_()({},V),{},{index:O})})),T=ae()(ce,2),xe=T[0],J=T[1],U=function(){J(function(O){return O.concat([{}])})},pe=function(){J(function(O){return O.slice(0,-1)})},Q=function(){J([])},L=function(O,Ce){var Ie;console.log("options",Ce);var De=Ce.value,be=Ce.rowIndex,je=(Ie=ue.find(function(Pe){return Pe.id===De}))!==null&&Ie!==void 0?Ie:{};O[be]=_()(_()({},O[be]),je),J(O)};return(0,a.jsxs)("div",{className:"wumu-demo",children:[(0,a.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,a.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,a.jsx)("button",{onClick:pe,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,a.jsx)("button",{onClick:Q,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,a.jsx)(W.O,{editId:ge,onEdit:_e,columns:se,dataSource:xe,onChange:L})]})}},26617:function(We,ne,u){u.d(ne,{O:function(){return Be}});var he=u(42122),_=u.n(he),me=u(38416),ae=u.n(me),oe=u(27424),W=u.n(oe),f=u(67294),a=u(85893),le={text:"text",select:"select"};function Z(e){var t=e.columns,n=e.autoCol,o=e.scrollBar,s=n.autoWidthColIndex,r=n.autoColWidth,i=o?t.concat([{width:o}]):t;return(0,a.jsx)("colgroup",{children:i.map(function(c,l){var d=c.width,C="col-".concat(l);return s===l?(0,a.jsx)("col",{style:{width:r!=null?r:120}},C):(0,a.jsx)("col",{style:{width:d!=null?d:120}},C)})})}function ge(e){var t=e.columns,n=e.clientWidth,o=n===void 0?0:n,s=null;t.forEach(function(i,c){var l=i.fixed;l!=="right"&&(s=c)});var r=o-t.reduce(function(i,c,l){var d;return i+(l===s?0:(d=c.width)!==null&&d!==void 0?d:120)},0);return{autoWidthColIndex:s,autoColWidth:r<120?120:r}}function _e(e){return e.map(function(t,n){return _()(_()({},t),{},{_rowKey:n,rowIndex:n})})}function de(){return(0,a.jsx)("div",{className:"wumu-deafult-not-found-content",children:"\u6682\u65E0\u6570\u636E~"})}function ue(e){var t=e.containerInfo,n=e.children,o=n===void 0?de():n,s={width:t.offsetWidth,marginLeft:t.scrollLeft};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{style:s,children:o})})}function se(e){var t=e.className,n=e.rowIndex,o=e.columnIndex,s=e.readonly,r=e.fixed,i=e.fixedClassName,c=i===void 0?"table-fixed-td":i,l=e.extraClassName,d=t;return n===0&&(d+=" table-first-tr"),o===0&&(d+=" table-first-td"),s&&(d+=" table-td-readonly"),r&&(d+=" ".concat(c)),l&&(d+=" ".concat(l)),d}function ie(e){var t=e.style,n=e.fixed,o=e.align;return o&&(t.textAlign=o),n&&(t.position="sticky",t.left=0,t.zIndex=1),t}function ce(e,t){var n=String(e).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var o=t||0,s="#",r,i;for(i=0;i<3;i++)r=parseInt(n.substr(i*2,2),16),r=Math.round(Math.min(Math.max(0,r+r*o),255)).toString(16),s+=("00"+r).substring(r.length);return s}function T(e,t){var n,o=e==null||(n=e.color)===null||n===void 0?void 0:n.primaryColor;return t?ce(o||"#1da57a",t):"".concat(o!=null?o:"var(--primary-color)")}function xe(e){var t=e.columns,n=e.headerHeight,o=e.containerInfo,s=t.map(function(i,c){var l=i.title,d=i.dataIndex,C=i.align,I=C===void 0?"left":C,x=i.fixed,w=i.readonly,v={textAlign:I},N="".concat(d,"-").concat(c),j=(o==null?void 0:o.scrollLeft)>0&&x==="left"?"fixed-left-shadow":null,S=x?(0,a.jsx)("div",{className:"table-cell-overflow-hidden",children:l}):l;return(0,a.jsx)("th",{title:l,className:se({className:"table-th",readonly:w,fixed:x,fixedClassName:"table-fixed-th",extraClassName:j}),style:ie({style:v,align:I,fixed:x}),children:S},N)}),r={height:n};return(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{style:r,className:"table-header",children:s})})}var J=xe;function U(e){return Array.isArray(e)?e:[]}function pe(e){return e!=null&&e!==""}function Q(e){return Array.isArray(e)&&e.length>0}var L=function(t){var n=t.initValue,o=t.inputChange,s=o===void 0?function(){}:o,r=t.onEdit,i=r===void 0?function(){}:r,c=t.column,l=c.align,d=l===void 0?"left":l,C={textAlign:d};return(0,a.jsx)("input",{className:"wumu-input",style:C,defaultValue:n,onChange:function(x){s(x.target.value)},autoFocus:!0,onBlur:function(){return i("")}})},V=L,O=u(73935),Ce=function(t){var n,o,s,r=(0,f.useRef)({current:{inited:!1}}),i=(0,f.useContext)(He),c=i.topHeight,l=t.initValue,d=t.inputChange,C=d===void 0?function(){}:d,I=t.onEdit,x=I===void 0?function(){}:I,w=t.column,v=t.config,N=v===void 0?null:v,j=w.align,S=j===void 0?"left":j,p=w.inputOptions,F=w.dataIndex,re=p!=null?p:{},E=re.selectData,q=(n=(o=U(E).find(function(b){return b.value===l}))===null||o===void 0?void 0:o.label)!==null&&n!==void 0?n:l,m=(0,f.useRef)(null),ee=(0,f.useState)(!0),k=W()(ee,2),$=k[0],H=k[1],R=(0,f.useState)({}),te=W()(R,2),h=te[0],z=te[1],M={textAlign:S},D={position:"absolute",zIndex:"10",width:((s=h==null?void 0:h.clientWidth)!==null&&s!==void 0?s:120)+16,left:(h==null?void 0:h.left)-16,top:(h==null?void 0:h.top)+(h==null?void 0:h.clientHeight)+1-c},g=(0,f.useMemo)(function(){if((E==null?void 0:E.length)===0)return(0,a.jsx)("div",{className:"wumu-dropdown-notfount",children:"\u6682\u65E0\u6570\u636E ~"});var b=U(E).map(function(P,y){var X=P.value,Ee=P.label,ye="".concat(y,"-").concat(X),ve=X===l,fe="".concat(ve?"wumu-dropDown-selected-item":""," wumu-dropdown-item"),B=ve?{backgroundColor:"".concat(T(N,.3))}:{};return(0,a.jsx)("div",{style:B,className:fe,onClick:function(K){K.stopPropagation(),C(X),x(""),H(!1)},children:Ee},ye)});return(0,a.jsx)(a.Fragment,{children:b})},[E==null?void 0:E.length]),A=function(){r.current.inited?(H(!1),x("")):r.current.inited=!0};(0,f.useEffect)(function(){if(m!=null&&m.current){for(var b,P=m.current,y=(b=m.current)!==null&&b!==void 0?b:{},X=y.clientWidth,Ee=y.clientHeight,ye=y.offsetTop,ve=y.offsetLeft,fe=ye,B=ve;(Y=P)!==null&&Y!==void 0&&Y.offsetParent;){var Y,K;fe+=P.offsetTop,B+=P.offsetLeft,P=(K=P)===null||K===void 0?void 0:K.offsetParent}z({clientWidth:X,clientHeight:Ee,top:fe,left:B})}},[m==null?void 0:m.current]),(0,f.useEffect)(function(){return document.addEventListener("click",A),function(){return document.removeEventListener("click",A)}},[]);var G=$?(0,O.createPortal)((0,a.jsx)("div",{className:"wumu-input-dropdown",style:D,children:g}),document.body):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:m,className:"wumu-input",autoFocus:!0,name:F,style:M,onBlur:function(){return x("")},children:q}),G]})},Ie=Ce,De=function(t){var n=t.column,o=n.inputType;return o===le.select?(0,a.jsx)(Ie,_()({},t)):(0,a.jsx)(V,_()({},t))},be=De;function je(e){var t=e.rowIndex,n=e.columns,o=e.record,s=e.rowHeight,r=e.editId,i=e.containerInfo,c=e.onEdit,l=c===void 0?function(){}:c,d=e.handleChange,C=d===void 0?function(){}:d,I=e.config,x=I===void 0?null:I,w=o._rowKey;return(0,a.jsx)("tr",{className:"table-tr",children:n.map(function(v,N){var j,S,p=v.dataIndex,F=v.align,re=F===void 0?"left":F,E=v.readonly,q=E===void 0?!1:E,m=v.fixed,ee=v.inputType,k="".concat(N,"-").concat(p),$="".concat(w,"-").concat(p),H=$===r,R={height:s,boxShadow:H?"inset 0px 0px 0px 1px ".concat(T(x)):"",padding:H?" 0 8px":"0 12px"},te=function(g){C(g,{rowIndex:w,dataIndex:p,record:o})},h=function(){if(Array.isArray(p)){var g=o;return p.forEach(function(A){g instanceof Object?g=g[A]:g=null}),g}return o[p]},z=H?(0,a.jsx)(be,{config:x,initValue:h(),inputChange:te,onEdit:l,column:v}):ee===le.select?(j=U(v==null||(S=v.inputOptions)===null||S===void 0?void 0:S.selectData).find(function(D){return D.value===h()}))===null||j===void 0?void 0:j.label:m?(0,a.jsx)("div",{className:"table-cell-overflow-hidden",children:h()}):h();console.log("dataIndex",p,m,i);var M=(i==null?void 0:i.scrollLeft)>0&&m==="left"?"fixed-left-shadow":null;return(0,a.jsx)("td",{id:$,style:ie({style:R,align:re,fixed:m}),className:se({className:"table-td",rowIndex:t,columnIndex:N,readonly:q,fixed:m,extraClassName:M}),title:h(),onClick:function(){return typeof l=="function"&&!q?l($):void 0},children:z},k)})})}var Pe=je;function Oe(e){var t=e.dataSource,n=e.columns,o=e.rowHeight,s=o===void 0?40:o,r=e.onEdit,i=e.editId,c=e.handleChange,l=c===void 0?function(){}:c,d=e.notFoundContent,C=e.containerInfo,I=e.config,x=U(t).length===0;return x?d:(0,a.jsx)("tbody",{className:"table-tbody",children:U(t).map(function(w,v){return Pe({config:I,rowIndex:v,record:w,columns:n,rowHeight:s,onEdit:r,editId:i,handleChange:l,containerInfo:C})})})}var Ne=Oe,$e=function(t,n){var o,s=n.overscan,r=s===void 0?0:s,i=n.itemHeight,c=i===void 0?40:i,l=n.maxHeight,d=l===void 0?400:l,C=n.onScrolled,I=C===void 0?function(){}:C,x=n.wrapperPropsStyle,w=x===void 0?{}:x,v=(0,f.useRef)(null),N=(0,f.useState)(0),j=W()(N,2),S=j[0],p=j[1],F=(0,f.useState)(Math.ceil(d/c)),re=W()(F,1),E=re[0],q=(0,f.useState)({offsetWidth:0,clientWidth:0}),m=W()(q,2),ee=m[0],k=m[1],$=S*c,H=(t==null?void 0:t.length)*c,R=function(D){var g=D.target,A=g.scrollTop,G=A===void 0?0:A,b=g.scrollLeft,P=b===void 0?0:b;I({scrollLeft:P}),k(function(X){return _()(_()({},X),{},{scrollTop:G,scrollLeft:P})});var y=r>0?Math.floor(G/c)-Math.ceil(r/2):Math.floor(G/c);p(y>0?y:0)},te={style:_()(_()({},w),{},{width:"100%",height:H,transform:"translateZ(0)",paddingTop:$})},h={onScroll:R,ref:function(D){return v.current=D},style:{overflowY:"overlay",overflowX:"auto",maxHeight:d,overflow:"auto"}};(0,f.useEffect)(function(){if(v!=null&&v.current){var M=new ResizeObserver(function(D){D.forEach(function(g){var A=g.target,G=A.offsetWidth,b=A.clientWidth;k({offsetWidth:G,clientWidth:b})})});return M.observe(v==null?void 0:v.current),function(){M.disconnect()}}},[v==null?void 0:v.current]);var z=t.slice(S,S+E+r);return{list:z,wrapperProps:te,containerProps:h,topHeight:$,bottomHeight:H-$-((o=z.length)!==null&&o!==void 0?o:0)*c,containerInfo:ee}},Me=$e,He=(0,f.createContext)({});function Te(){return 16}var Re=function(t){var n=t.columns,o=t.dataSource,s=t.editId,r=t.onEdit,i=r===void 0?function(){}:r,c=t.rowHeight,l=c===void 0?40:c,d=t.maxHeight,C=d===void 0?400:d,I=t.headerHeight,x=I===void 0?55:I,w=t.onChange,v=w===void 0?function(){}:w,N=t.hiddenHerder,j=N===void 0?!1:N,S=t.notFoundContent,p=S===void 0?null:S,F=t.config,re=F===void 0?null:F,E=(0,f.useRef)(null),q=(0,f.useState)([]),m=W()(q,2),ee=m[0],k=m[1],$=(0,f.useState)([]),H=W()($,2),R=H[0],te=H[1],h=(0,f.useState)({autoWidthColIndex:null,autoColWidth:120}),z=W()(h,2),M=z[0],D=z[1],g=Me(ee,{itemHeight:l,maxHeight:C,overscan:0,onScrolled:function(B){var Y=B.scrollLeft;E.current&&(E.current.scrollLeft=Y)},wrapperPropsStyle:{borderSpacing:0}}),A=g.list,G=g.wrapperProps,b=g.containerProps,P=g.bottomHeight,y=g.containerInfo,X=g.topHeight,Ee=function(B,Y){var K=Y.rowIndex,we=Y.dataIndex,Se=ee;Array.isArray(we)?we.reduceRight(function(Ae,Le,Ke){return Ke===0&&(Se[K][Le]=Ae),ae()({},Le,Ae)},B):Se[K][we]=B,v(Se,{rowIndex:K,dataIndex:we,value:B,record:Se[K]})};(0,f.useEffect)(function(){k(_e(o))},[o.length]),(0,f.useEffect)(function(){te(n)},[n]),(0,f.useEffect)(function(){y.clientWidth&&D(ge({columns:R,clientWidth:y.clientWidth}))},[y]);var ye=j?null:(0,a.jsx)("div",{className:"wumu-table-header",ref:E,children:(0,a.jsxs)("table",{children:[Z({columns:R,autoCol:M,scrollBar:Te()}),J({columns:R,headerHeight:x,containerInfo:y})]})}),ve={topHeight:X};return(0,a.jsxs)("div",{className:"wumu-table",children:[ye,(0,a.jsx)("div",_()(_()({className:"wumu-table-body"},b),{},{children:(0,a.jsx)(He.Provider,{value:ve,children:(0,a.jsxs)("table",_()(_()({},G),{},{children:[Z({columns:n,autoCol:M}),Ne({config:re,dataSource:A,columns:R,rowHeight:l,onEdit:i,editId:s,handleChange:Ee,containerInfo:y,notFoundContent:ue(p?{containerInfo:y,children:p}:{containerInfo:y,children:de()})}),(0,a.jsx)("div",{style:{height:P}})]}))})}))]})},Be=Re},95716:function(){}}]);
