"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{76555:function(He,Q,c){c.r(Q);var xe=c(42122),h=c.n(xe),Ce=c(27424),q=c.n(Ce),ee=c(67294),P=c(16200),m=c(95716),C=c(85893);Q.default=function(){var Ie=(0,ee.useState)(""),le=q()(Ie,2),te=le[0],i=le[1],re=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300,inputOptions:{placeholder:"\u8BF7\u8F93\u5165\u66F4\u65B0\u65E5\u5FD7"}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u7528\u6237-\u59D3\u540D",dataIndex:["user","name"],width:300},{title:"\u7528\u6237-\u5E74\u7EAA",dataIndex:["user","age"]}],ue=[{verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2",user:{name:"xiaohua",age:18}},{verison:"0.0.2",log:"add header Render"},{verison:"0.0.3",log:"feat style"},{verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],ye=(0,ee.useState)(ue.map(function(U,W){return h()(h()({},U),{},{index:W})})),de=q()(ye,2),ce=de[0],B=de[1],se=function(){B(function(W){return W.concat([{}])})},K=function(){B(function(W){return W.slice(0,-1)})},ve=function(){B([])},fe=function(W,F){console.log("options",F),B(W)};return(0,C.jsxs)("div",{className:"wumu-demo",children:[(0,C.jsxs)("div",{className:"wumu-demo-wrap",style:{display:"flex",marginBottom:"16px"},children:[(0,C.jsx)("button",{onClick:se,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u884C\u5230\u6700\u540E"}),(0,C.jsx)("button",{onClick:K,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u884C"}),(0,C.jsx)("button",{onClick:ve,type:"button",className:"wumu-demo-button",children:"\u5168\u90E8\u5220\u9664"})]}),(0,C.jsx)(P.O,{editId:te,onEdit:i,columns:re,dataSource:ce,onChange:fe})]})}},13595:function(He,Q,c){c.r(Q);var xe=c(42122),h=c.n(xe),Ce=c(27424),q=c.n(Ce),ee=c(67294),P=c(16200),m=c(95716),C=c(85893);Q.default=function(){var Ie=(0,ee.useState)(""),le=q()(Ie,2),te=le[0],i=le[1],re=[{value:1,label:"v0.0.1"},{value:2,label:"v0.1.0"},{value:3,label:"v0.1.2"},{value:4,label:"v0.1.3"}],ue=[{id:1,verison:"0.0.1",log:"init project",remark:"\u{1F44A}based on dumi v2"},{id:2,verison:"0.0.2",log:"add header Render"},{id:3,verison:"0.0.3",log:"feat style"},{id:4,verison:"\u{1F4A5}0.1.0",log:"add changeHandle",remark:"\u57FA\u7840\u529F\u80FD\u5DF2\u7ECF\u53EF\u7528"},{id:5,verison:"0.1.2",log:"add api docs",remark:"\u2728\u65B0\u589Eapi\u6587\u6863"},{id:6,verison:"\u{1F38A}0.1.3",log:"add github pages",remark:"\u5730\u5740: https://wumusenlin.github.io/wumu-edit-table/components/edit-table"}],ye=[{title:"\u5E8F\u53F7",dataIndex:"index",width:60,align:"center",fixed:"left"},{title:"\u9009\u62E9\u7248\u672C\u53F7",dataIndex:"select",width:200,inputType:"select",inputOptions:{selectData:re}},{title:"\u7248\u672C\u53F7",dataIndex:"verison",width:300},{title:"\u66F4\u65B0\u65E5\u5FD7",dataIndex:"log",align:"right",width:300},{title:"\u5907\u6CE8",dataIndex:"remark"}],de=[{}],ce=(0,ee.useState)(de.map(function(F,H){return h()(h()({},F),{},{index:H})})),B=q()(ce,2),se=B[0],K=B[1],ve=function(){K(function(H){return H.concat([{}])})},fe=function(){K(function(H){return H.slice(0,-1)})},U=function(){K([])},W=function(H,Ee){var be;console.log("options",Ee);var Ae=Ee.value,we=Ee.rowIndex,Oe=(be=ue.find(function(We){return We.id===Ae}))!==null&&be!==void 0?be:{};H[we]=h()(h()({},H[we]),Oe),K(H)};return(0,C.jsxs)("div",{className:"wumu-demo",children:[(0,C.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,C.jsx)("button",{onClick:ve,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,C.jsx)("button",{onClick:fe,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,C.jsx)("button",{onClick:U,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,C.jsx)(P.O,{editId:te,onEdit:i,columns:ye,dataSource:se,onChange:W})]})}},16200:function(He,Q,c){c.d(Q,{O:function(){return Ge}});var xe=c(42122),h=c.n(xe),Ce=c(38416),q=c.n(Ce),ee=c(27424),P=c.n(ee),m=c(67294);function C(e){return Array.isArray(e)?e:[]}function Ie(e){return e!=null&&e!==""}function le(e){return Array.isArray(e)&&e.length>0}var te=function(t){return typeof t=="function"},i=c(85893),re={text:"text",select:"select"};function ue(e){var t=e.columns,n=e.autoCol,o=e.scrollBar,l=n.autoWidthColIndex,a=n.autoColWidth,u=o?t.concat([{width:o,dataIndex:"_innerScrollBar",title:""}]):t;return(0,i.jsx)("colgroup",{children:u.map(function(v,r){var d=v.width,g="col-".concat(r);return l===r?(0,i.jsx)("col",{style:{width:a!=null?a:120}},g):(0,i.jsx)("col",{style:{width:d!=null?d:120}},g)})})}function ye(e){var t=e.columns,n=e.clientWidth,o=n===void 0?0:n,l=null;t.forEach(function(u,v){var r=u.fixed;r!=="right"&&(l=v)});var a=o-t.reduce(function(u,v,r){var d;return u+(r===l?0:(d=v.width)!==null&&d!==void 0?d:120)},0);return{autoWidthColIndex:l,autoColWidth:a<120?120:a}}function de(e){return e.map(function(t,n){return h()(h()({},t),{},{_rowKey:n,rowIndex:n})})}function ce(){return(0,i.jsx)("div",{className:"wumu-default-not-found-content",children:"\u6682\u65E0\u6570\u636E~"})}function B(e){var t=e.containerInfo,n=e.children,o=n===void 0?ce():n,l={width:t.offsetWidth,marginLeft:t.scrollLeft};return(0,i.jsx)("div",{children:(0,i.jsx)("div",{style:l,children:o})})}function se(e){var t=e.className,n=e.rowIndex,o=e.columnIndex,l=e.readonly,a=e.fixed,u=e.fixedClassName,v=u===void 0?"table-fixed-td":u,r=e.extraClassName,d=t;return n===0&&(d+=" table-first-tr"),o===0&&(d+=" table-first-td"),l&&(d+=" table-td-readonly"),a&&(d+=" ".concat(v)),r&&(d+=" ".concat(r)),d}function K(e){var t=e.style,n=e.fixed,o=e.align;return o&&(t.textAlign=o),n&&(t.position="sticky",t.left=0,t.zIndex=1),t}function ve(e,t){var n=String(e).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var o=t||0,l="#",a,u;for(u=0;u<3;u++)a=parseInt(n.substr(u*2,2),16),a=Math.round(Math.min(Math.max(0,a+a*o),255)).toString(16),l+=("00"+a).substring(a.length);return l}function fe(e,t){var n,o=e==null||(n=e.color)===null||n===void 0?void 0:n.primaryColor;return t?ve(o||"#1da57a",t):"".concat(o!=null?o:"var(--primary-color)")}function U(e){var t=e!=null?e:{},n=t.onAdd,o=t.onDelete,l=t.deleteAll;return[n,o,l].every(function(a){return!Ie(a)})?null:(0,i.jsxs)("div",{className:"wumu-toolbar",children:[te(n)?(0,i.jsx)("button",{onClick:n,type:"button",className:"wumu-demo-button",title:"\u65B0\u589E\u884C",children:"+"}):null,te(o)?(0,i.jsx)("button",{onClick:o,type:"button",className:"wumu-demo-button",title:"\u5220\u9664\u884C",children:"-"}):null,te(l)?(0,i.jsx)("button",{onClick:l,type:"button",className:"wumu-demo-button",title:"\u5220\u9664\u6240\u6709",children:"\u5220\u9664\u6240\u6709\u6570\u636E"}):null]})}function W(e){var t=e.columns,n=e.headerHeight,o=e.containerInfo,l=t.map(function(u,v){var r=u.title,d=u.dataIndex,g=u.align,I=g===void 0?"left":g,y=u.fixed,E=u.readonly,w={textAlign:I},s="".concat(d,"-").concat(v),N=(o==null?void 0:o.scrollLeft)>0&&y==="left"?"fixed-left-shadow":null,A=y?(0,i.jsx)("div",{className:"table-cell-overflow-hidden",children:r}):r;return(0,i.jsx)("th",{title:r,className:se({className:"table-th",readonly:E,fixed:y,fixedClassName:"table-fixed-th",extraClassName:N}),style:K({style:w,align:I,fixed:y}),children:A},s)}),a={height:n};return(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{style:a,className:"table-header",children:l})})}var F=W,H=function(t){var n=t.initValue,o=t.inputChange,l=o===void 0?function(){}:o,a=t.onEdit,u=a===void 0?function(){}:a,v=t.column,r=v.align,d=r===void 0?"left":r,g=v.inputOptions,I=g===void 0?{}:g,y={textAlign:d};return(0,i.jsx)("input",h()({className:"wumu-input",style:y,defaultValue:n,onChange:function(w){l(w.target.value)},autoFocus:!0,onBlur:function(){return u("")}},I))},Ee=H,be=c(73935),Ae=function(t){var n,o,l,a=(0,m.useRef)({current:{inited:!1}}),u=(0,m.useContext)(Ne),v=u.topHeight,r=t.initValue,d=t.inputChange,g=d===void 0?function(){}:d,I=t.onEdit,y=I===void 0?function(){}:I,E=t.column,w=t.config,s=w===void 0?null:w,N=E.align,A=N===void 0?"left":N,p=E.inputOptions,k=E.dataIndex,ne=p!=null?p:{},S=ne.selectData,X=(n=(o=C(S).find(function(_){return _.value===r}))===null||o===void 0?void 0:o.label)!==null&&n!==void 0?n:r,x=(0,m.useRef)(null),Y=(0,m.useState)(!0),V=P()(Y,2),L=V[0],O=V[1],Z=(0,m.useState)({}),z=P()(Z,2),f=z[0],oe=z[1],J={textAlign:A},j={position:"absolute",zIndex:"10",width:((l=f==null?void 0:f.clientWidth)!==null&&l!==void 0?l:120)+16,left:(f==null?void 0:f.left)-16,top:(f==null?void 0:f.top)+(f==null?void 0:f.clientHeight)+3-v},b=(0,m.useMemo)(function(){if((S==null?void 0:S.length)===0)return(0,i.jsx)("div",{className:"wumu-dropdown-notfount",children:"\u6682\u65E0\u6570\u636E ~"});var _=C(S).map(function(D,M){var R=D.value,ie=D.label,T="".concat(M,"-").concat(R),he=R===r,me="".concat(he?"wumu-dropDown-selected-item":""," wumu-dropdown-item"),_e=he?{backgroundColor:"".concat(fe(s,.3))}:{};return(0,i.jsx)("div",{style:_e,className:me,onClick:function(ae){ae.stopPropagation(),g(R),y(""),O(!1)},children:ie},T)});return(0,i.jsx)(i.Fragment,{children:_})},[S==null?void 0:S.length]),$=function(){a.current.inited?(O(!1),y("")):a.current.inited=!0};(0,m.useEffect)(function(){if(x!=null&&x.current){for(var _,D=x.current,M=(_=x.current)!==null&&_!==void 0?_:{},R=M.clientWidth,ie=M.clientHeight,T=M.offsetTop,he=M.offsetLeft,me=T,_e=he;(ge=D)!==null&&ge!==void 0&&ge.offsetParent;){var ge,ae;me+=D.offsetTop,_e+=D.offsetLeft,D=(ae=D)===null||ae===void 0?void 0:ae.offsetParent}oe({clientWidth:R,clientHeight:ie,top:me,left:_e})}},[x==null?void 0:x.current]),(0,m.useEffect)(function(){return document.addEventListener("click",$),function(){return document.removeEventListener("click",$)}},[]);var G=L?(0,be.createPortal)((0,i.jsx)("div",{className:"wumu-input-dropdown",style:j,children:b}),document.body):null;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:x,className:"wumu-input",autoFocus:!0,name:k,style:J,onBlur:function(){return y("")},children:X}),G]})},we=Ae,Oe=function(t){var n=t.column,o=n.inputType;return o===re.select?(0,i.jsx)(we,h()({},t)):(0,i.jsx)(Ee,h()({},t))},We=Oe;function Me(e){var t,n,o,l=e.rowIndex,a=e.record,u=e.rowHeight,v=e.editId,r=e.containerInfo,d=e.onEdit,g=d===void 0?function(){}:d,I=e.handleChange,y=I===void 0?function(){}:I,E=e.config,w=E===void 0?null:E,s=e.col,N=e.columnIndex,A=a._rowKey,p=s.dataIndex,k=s.align,ne=k===void 0?"left":k,S=s.readonly,X=S===void 0?!1:S,x=s.fixed,Y=s.inputType,V="".concat(N,"-").concat(p),L="".concat(A,"-").concat(p),O=L===v,Z={height:u,boxShadow:O?"inset 0px 0px 0px 1px ".concat(fe(w)):"",padding:O?" 0 8px":"0 12px"},z=function(b){y(b,{rowIndex:A,dataIndex:p,record:a})},f=function(){if(Array.isArray(p)){var b=a;return p.forEach(function($){b instanceof Object?b=b[$]:b=null}),b}return a[p]},oe=O?(0,i.jsx)(We,{config:w,initValue:f(),inputChange:z,onEdit:g,column:s}):Y===re.select?(t=C(s==null||(n=s.inputOptions)===null||n===void 0?void 0:n.selectData).find(function(j){return j.value===f()}))===null||t===void 0?void 0:t.label:x?(0,i.jsx)("div",{className:"table-cell-overflow-hidden",children:f()}):f(),J=((o=r==null?void 0:r.scrollLeft)!==null&&o!==void 0?o:0)>0&&x==="left"?"fixed-left-shadow":null;return(0,i.jsx)("td",{id:L,style:K({style:Z,align:ne,fixed:x}),className:se({className:"table-td",rowIndex:l,columnIndex:N,readonly:X,fixed:x,extraClassName:J}),title:f(),onClick:function(){return typeof g=="function"&&!X?g(L):void 0},children:oe},V)}var Te=Me;function Be(e){var t=e.columns;return(0,i.jsx)("tr",{className:"table-tr",children:t.map(function(n,o){return Te(h()(h()({},e),{},{col:n,columnIndex:o}))})})}var Re=Be;function Ke(e){var t=e.dataSource,n=e.columns,o=e.rowHeight,l=o===void 0?40:o,a=e.onEdit,u=e.editId,v=e.handleChange,r=v===void 0?function(){}:v,d=e.notFoundContent,g=e.containerInfo,I=e.config,y=C(t).length===0;return y?d:(0,i.jsx)("tbody",{className:"table-tbody",children:C(t).map(function(E,w){return Re({config:I,rowIndex:w,record:E,columns:n,rowHeight:l,onEdit:a,editId:u,handleChange:r,containerInfo:g})})})}var Ue=Ke,Fe=function(t,n){var o,l=n!=null?n:{},a=l.overscan,u=a===void 0?0:a,v=l.itemHeight,r=v===void 0?40:v,d=l.maxHeight,g=d===void 0?400:d,I=l.onScrolled,y=I===void 0?function(){}:I,E=l.wrapperPropsStyle,w=E===void 0?{}:E,s=(0,m.useRef)(null),N=(0,m.useState)(0),A=P()(N,2),p=A[0],k=A[1],ne=(0,m.useState)(Math.ceil(g/r)),S=P()(ne,1),X=S[0],x=(0,m.useState)({offsetWidth:0,clientWidth:0}),Y=P()(x,2),V=Y[0],L=Y[1],O=p*r,Z=(t==null?void 0:t.length)*r,z=function(b){var $=b.target,G=$.scrollTop,_=G===void 0?0:G,D=$.scrollLeft,M=D===void 0?0:D;y({scrollLeft:M}),L(function(ie){return h()(h()({},ie),{},{scrollTop:_,scrollLeft:M})});var R=u>0?Math.floor(_/r)-Math.ceil(u/2):Math.floor(_/r);k(R>0?R:0)},f={style:h()(h()({},w),{},{width:"100%",height:Z,transform:"translateZ(0)",paddingTop:O})},oe={onScroll:z,ref:function(b){return s.current=b},style:{overflowY:"overlay",overflowX:"auto",maxHeight:g,overflow:"auto"}};(0,m.useEffect)(function(){if(s!=null&&s.current){var j=new ResizeObserver(function(b){b.forEach(function($){var G=$.target,_=G.offsetWidth,D=G.clientWidth;L({offsetWidth:_,clientWidth:D})})});return j.observe(s==null?void 0:s.current),function(){j.disconnect()}}},[s==null?void 0:s.current]);var J=t.slice(p,p+X+u);return{list:J,wrapperProps:f,containerProps:oe,topHeight:O,bottomHeight:Z-O-((o=J.length)!==null&&o!==void 0?o:0)*r,containerInfo:V}},ke=Fe,Ne=(0,m.createContext)({});function Ve(){return 16}var ze=function(t){var n=t.columns,o=t.dataSource,l=t.editId,a=t.onEdit,u=a===void 0?function(){}:a,v=t.rowHeight,r=v===void 0?40:v,d=t.maxHeight,g=d===void 0?400:d,I=t.headerHeight,y=I===void 0?55:I,E=t.onChange,w=E===void 0?function(){}:E,s=t.hiddenHerder,N=s===void 0?!1:s,A=t.notFoundContent,p=A===void 0?null:A,k=t.config,ne=k===void 0?null:k,S=t.onAdd,X=t.onDelete,x=(0,m.useRef)(null),Y=(0,m.useState)([]),V=P()(Y,2),L=V[0],O=V[1],Z=(0,m.useState)([]),z=P()(Z,2),f=z[0],oe=z[1],J=(0,m.useState)({autoWidthColIndex:null,autoColWidth:120}),j=P()(J,2),b=j[0],$=j[1],G={itemHeight:r,maxHeight:g,overscan:0,onScrolled:function(pe){var Se=pe.scrollLeft;x.current&&(x.current.scrollLeft=Se)},wrapperPropsStyle:{borderSpacing:0}},_=ke(L,G),D=_.list,M=_.wrapperProps,R=_.containerProps,ie=_.bottomHeight,T=_.containerInfo,he=_.topHeight,me=function(pe,Se){var De=Se.rowIndex,je=Se.dataIndex,Pe=L;Array.isArray(je)?je.reduceRight(function(Le,$e,Xe){return Xe===0&&(Pe[De][$e]=Le),q()({},$e,Le)},pe):Pe[De][je]=pe,w(Pe,{rowIndex:De,dataIndex:je,value:pe,record:Pe[De]})};(0,m.useEffect)(function(){O(de(o))},[o.length]),(0,m.useEffect)(function(){oe(n)},[n]),(0,m.useEffect)(function(){T.clientWidth&&$(ye({columns:f,clientWidth:T.clientWidth}))},[T]);var _e=N?null:(0,i.jsx)("div",{className:"wumu-table-header",ref:x,children:(0,i.jsxs)("table",{children:[ue({columns:f,autoCol:b,scrollBar:Ve()}),F({columns:f,headerHeight:y,containerInfo:T})]})}),ge={topHeight:he};return(0,i.jsxs)("div",{className:"wumu-table",children:[U({onAdd:S,onDelete:X}),_e,(0,i.jsx)("div",h()(h()({className:"wumu-table-body"},R),{},{children:(0,i.jsx)(Ne.Provider,{value:ge,children:(0,i.jsxs)("table",h()(h()({},M),{},{children:[ue({columns:n,autoCol:b}),Ue({config:ne,dataSource:D,columns:f,rowHeight:r,onEdit:u,editId:l,handleChange:me,containerInfo:T,notFoundContent:B(p?{containerInfo:T,children:p}:{containerInfo:T,children:ce()})}),(0,i.jsx)("div",{style:{height:ie}})]}))})}))]})},Ge=ze},95716:function(){}}]);
