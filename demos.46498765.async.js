"use strict";(self.webpackChunkwumu_edit_table=self.webpackChunkwumu_edit_table||[]).push([[433],{50587:function(wt,Z,E){E.r(Z),E.d(Z,{default:function(){return xt}});var et=E(27424),j=E.n(et),f=E(67294),nt=E(42122),x=E.n(nt),d=E(85893);function at(e){var t=e.columns,n=e.headerHeight,i=t.map(function(r,l){var a=r.title,u=r.dataIndex,o=r.align,c=o===void 0?"left":o,v={textAlign:c},g="".concat(u,"-").concat(l);return(0,d.jsx)("th",{title:a,className:"table-th",style:v,children:a},g)}),s={height:n};return(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{style:s,className:"table-header",children:i})})}var ot=at;function z(e){return Array.isArray(e)?e:[]}function St(e){return e!=null&&e!==""}var dt=function(t){var n=t.initValue,i=t.inputChange,s=i===void 0?function(){}:i,r=t.onEdit,l=r===void 0?function(){}:r,a=t.column,u=a.align,o=u===void 0?"left":u,c={textAlign:o};return(0,d.jsx)("input",{className:"wumu-input",style:c,defaultValue:n,onChange:function(g){s(g.target.value)},autoFocus:!0,onBlur:function(){return l("")}})},rt=dt;function it(e){var t=e.columns,n=e.record,i=e.rowHeight,s=e.editId,r=e.onEdit,l=r===void 0?function(){}:r,a=e.handleChange,u=a===void 0?function(){}:a,o=n._rowKey;return(0,d.jsx)("tr",{className:"table-tr",children:t.map(function(c,v){var g=c.dataIndex,m=c.align,h=m===void 0?"left":m,y=c.readonly,H=y===void 0?!1:y,p="".concat(v,"-").concat(g),w="".concat(o,"-").concat(g),S=w===s,k=function(){var C="table-td";return H&&(C+=" table-td-readonly"),C},b={height:i,textAlign:h,boxShadow:S?"inset 0px 0px 0px 1px var(--primary-color)":"",padding:S?" 0 8px":"0 12px"},N=function(C){u(C,{rowIndex:o,dataIndex:g,record:n,cellId:w})},_=n[g],P=S?(0,d.jsx)(rt,{initValue:_,inputChange:N,onEdit:l,column:c}):_;return(0,d.jsx)("td",{id:w,style:b,className:k(),title:_,onClick:function(){return typeof l=="function"&&!H?l(w):void 0},children:P},p)})})}var lt=it;function ut(e){var t=e.dataSource,n=e.columns,i=e.rowHeight,s=i===void 0?40:i,r=e.onEdit,l=e.editId,a=e.handleChange,u=a===void 0?function(){}:a,o=e.notFoundContent,c=z(t).length===0;return c?o:(0,d.jsx)("tbody",{className:"table-tbody",children:z(t).map(function(v){return lt({record:v,columns:n,rowHeight:s,onEdit:r,editId:l,handleChange:u})})})}var st=ut,ct=function(t,n){var i,s=n.overscan,r=s===void 0?0:s,l=n.itemHeight,a=l===void 0?40:l,u=n.maxHeight,o=u===void 0?400:u,c=n.onScrolled,v=c===void 0?function(){}:c,g=n.wrapperPropsStyle,m=g===void 0?{}:g,h=(0,f.useRef)(),y=(0,f.useState)(0),H=j()(y,2),p=H[0],w=H[1],S=(0,f.useState)((t==null?void 0:t.length)*a),k=j()(S,2),b=k[0],N=k[1],_=(0,f.useState)(Math.ceil(o/a)),P=j()(_,1),A=P[0],C=(0,f.useState)({offsetWidth:0,clientWidth:0}),F=j()(C,2),G=F[0],L=F[1],B=p*a,O=function(R){var I=R.target,K=I.scrollTop,T=K===void 0?0:K,M=I.scrollLeft,D=M===void 0?0:M;v({scrollLeft:D}),L(function(Y){return x()(x()({},Y),{},{scrollTop:T,scrollLeft:D})});var W=r>0?Math.floor(T/a)-Math.ceil(r/2):Math.floor(T/a);w(W>0?W:0)},$={style:x()(x()({},m),{},{width:"100%",height:b,transform:"translateZ(0)",paddingTop:B})},U={onScroll:O,ref:function(R){return h.current=R},style:{overflowY:"overlay",overflowX:"auto",maxHeight:o,overflow:"auto"}};(0,f.useEffect)(function(){N((t==null?void 0:t.length)*a)},[t==null?void 0:t.length]),(0,f.useEffect)(function(){h!=null&&h.current&&L({offsetWidth:h.current.offsetWidth,clientWidth:h.current.clientWidth})},[h==null?void 0:h.current]);var V=t.slice(p,p+A+r);return{list:V,wrapperProps:$,containerProps:U,topHeight:B,bottomHeight:b-B-((i=V.length)!==null&&i!==void 0?i:0)*a,containerInfo:G}},ht=ct;function J(e){var t=e.columns,n=e.autoCol,i=e.scrollBar,s=n.autoWidthColIndex,r=n.autoColWidth,l=i?t.concat([{width:i}]):t;return(0,d.jsx)("colgroup",{children:l.map(function(a,u){var o=a.width,c="col-".concat(u);return s===u?(0,d.jsx)("col",{style:{width:r!=null?r:120}},c):(0,d.jsx)("col",{style:{width:o!=null?o:120}},c)})})}function ft(e){var t=e.columns,n=e.clientWidth,i=n===void 0?0:n,s=null;t.forEach(function(l,a){var u=l.fixed;u!=="right"&&(s=a)});var r=i-1-t.reduce(function(l,a,u){var o;return l+(u===s?0:(o=a.width)!==null&&o!==void 0?o:120)},0);return{autoWidthColIndex:s,autoColWidth:r}}function gt(e){return e.map(function(t,n){return x()(x()({},t),{},{_rowKey:n,rowIndex:n})})}function Q(){return(0,d.jsx)("div",{className:"wumu-deafult-not-found-content",children:"\u6682\u65E0\u6570\u636E~"})}function q(e){var t=e.containerInfo,n=e.children,i=n===void 0?Q():n,s={width:t.offsetWidth,marginLeft:t.scrollLeft};return(0,d.jsx)("div",{children:(0,d.jsx)("div",{style:s,children:i})})}function vt(){return 16}var mt=function(t){var n=t.columns,i=t.dataSource,s=t.editId,r=t.onEdit,l=r===void 0?function(){}:r,a=t.rowHeight,u=a===void 0?40:a,o=t.maxHeight,c=o===void 0?400:o,v=t.headerHeight,g=v===void 0?55:v,m=t.onChange,h=m===void 0?function(){}:m,y=t.hiddenHerder,H=y===void 0?!1:y,p=t.notFoundContent,w=p===void 0?null:p,S=(0,f.useRef)(null),k=(0,f.useState)([]),b=j()(k,2),N=b[0],_=b[1],P=(0,f.useState)([]),A=j()(P,2),C=A[0],F=A[1],G=(0,f.useState)({autoWidthColIndex:null,autoColWidth:120}),L=j()(G,2),B=L[0],O=L[1],$=ht(N,{itemHeight:u,maxHeight:c,overscan:0,onScrolled:function(D){var W=D.scrollLeft;S.current&&(S.current.scrollLeft=W),l("")},wrapperPropsStyle:{borderSpacing:0}}),U=$.list,V=$.wrapperProps,X=$.containerProps,R=$.bottomHeight,I=$.containerInfo,K=function(D,W){var Y=W.rowIndex,jt=W.dataIndex,tt=N;tt[Y][jt]=D,h(tt,{})};(0,f.useEffect)(function(){console.log("process.env",{NODE_ENV:"production",PUBLIC_PATH:"/wumu-edit-table/"}),_(gt(i))},[i.length]),(0,f.useEffect)(function(){F(n)},[n]),(0,f.useLayoutEffect)(function(){I.clientWidth&&O(ft({columns:C,clientWidth:I.clientWidth}))},[I]);var T=H?null:(0,d.jsx)("div",{className:"wumu-table-header",ref:S,children:(0,d.jsxs)("table",{children:[J({columns:C,autoCol:B,scrollBar:vt()}),ot({columns:C,headerHeight:g})]})});return(0,d.jsxs)("div",{className:"wumu-table",children:[T,(0,d.jsx)("div",x()(x()({className:"wumu-table-body"},X),{},{children:(0,d.jsxs)("table",x()(x()({},V),{},{children:[J({columns:n,autoCol:B}),st({dataSource:U,columns:C,rowHeight:u,onEdit:l,editId:s,handleChange:K,notFoundContent:q(w?{containerInfo:I,children:w}:{containerInfo:I,children:Q()}),autoCol:B}),(0,d.jsx)("div",{style:{height:R}})]}))}))]})},Ct=mt,xt=function(){var e=(0,f.useState)(""),t=j()(e,2),n=t[0],i=t[1],s=[{title:"\u5E8F\u53F7",dataIndex:"rowIndex",width:60,align:"center"},{title:"A",dataIndex:"A",width:300},{title:"B",dataIndex:"B",align:"right"},{title:"C",dataIndex:"C",width:300},{title:"D",dataIndex:"D"},{title:"E",dataIndex:"E",width:380},{title:"F",dataIndex:"F",width:300}],r=[{A:"\u5E72\u561B",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fasdfasdf",B:"asdfasd",C:"ghjfgh"},{A:"adsfasdf",B:"fasdf",C:"rsfgsdf"},{A:"khjkghj",B:"\u54CE\u54DF",C:"8iuk",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"wts",B:"vbn",C:"fhj"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"\u5E72\u561B",B:"shshsdfgsdfgsdfgsdfgsdfgsdfg",C:"khjkghjk"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"},{A:"adsfads",B:"ghdfgjgh",C:"adsfasdfad"},{A:"fhjf",B:"\u54CE\u54DF",C:"haha",D:"\u5676\u901F\u5EA6\u8FDB\u6765\u770B\u54C8\u6D41\u53E3\u6C34\u7684\u4EFD",E:"guaiosdjlkgjasdgasdg"}],l=(0,f.useState)(r),a=j()(l,2),u=a[0],o=a[1],c=function(){o(function(h){return h.concat([{}])})},v=function(){o(function(h){return h.slice(0,-1)})},g=function(){o([])};return(0,d.jsxs)("div",{className:"wumu-demo",children:[(0,d.jsxs)("div",{style:{display:"flex",marginBottom:"16px"},children:[(0,d.jsx)("button",{onClick:c,type:"button",className:"wumu-demo-button",children:"\u65B0\u589E\u4E00\u884C\u5230\u6700\u540E"}),(0,d.jsx)("button",{onClick:v,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6700\u540E\u4E00\u884C"}),(0,d.jsx)("button",{onClick:g,type:"button",className:"wumu-demo-button",children:"\u5220\u9664\u6240\u6709\u6570\u636E"})]}),(0,d.jsx)(Ct,{editId:n,onEdit:i,columns:s,dataSource:u,onChange:function(h){return o(h)}})]})}}}]);
